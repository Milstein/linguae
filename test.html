<!DOCTYPE html>
<html>
  <head>
    <title>Place searches</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>
    <script>
      if( navigator.geolocation )
      {
       // Call getCurrentPosition with success and failure callbacks
       navigator.geolocation.getCurrentPosition( success, fail );
      }
      else
      {
       alert("Sorry, your browser does not support geolocation services.");
      }
      function success(position)
      {
        var longitude = position.coords.longitude;
        var latitude = position.coords.latitude;
        var url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location="+latitude+","+longitude+"&radius=5000&types=food&photoreference&key=AIzaSyAZwbQCDTf-AKn0dvdNahrgXOqkZQTydTQ";
        initialize(latitude,longitude)
      }

      var map;
var service;
var infowindow;

function initialize(lat,long) {
  var pyrmont = new google.maps.LatLng(lat,long);

  var request = {
    location: pyrmont,
    radius: '5000',
    types: ['food']
  };

  service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);
}

function callback(results, status) {h
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      alert(results[i]);
    }
  }
}

     function fail()
     {
        alert("Whoops");
     }
    </script>
  </head>
  <body>
    <div id="message"></div>
  </body>
</html>
